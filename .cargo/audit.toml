# Cargo Audit Configuration
# See: https://github.com/rustsec/rustsec/blob/main/cargo-audit/audit.toml.example

# Advisory Database Configuration
[database]
fetch = true
url = "https://github.com/RustSec/advisory-db.git"
stale = false

# Output Configuration
[output]
deny = ["warnings"]
format = "terminal"
show_tree = true
quiet = false

# Advisories to Ignore
# These are documented in SECURITY.md with full context and risk assessment
[advisories]
# RUSTSEC-2023-0071: RSA Marvin Attack timing side-channel
# Status: Only affects optional SMB feature (not default build)
# Risk: Low (requires --features smb-native + active MITM exploitation)
# Documentation: SECURITY.md#dependency-security-audit
# Reason: No upstream fix available; default builds unaffected
# RUSTSEC-2024-0436: paste crate unmaintained (compile-time macros only)
# Risk: Minimal (no runtime code execution)
# RUSTSEC-2025-0134: rustls-pemfile unmaintained (via AWS SDK)
# Status: Transitive dependency through aws-smithy-runtime -> hyper-rustls 0.24
# Risk: Low (not a security vulnerability, just unmaintained)
# Plan: Remove once AWS SDK updates to rustls-pki-types 1.9+
# Advisory Date: 2025-11-28 (very recent, AWS SDK fix expected soon)
# RUSTSEC-2025-0141: bincode unmaintained (core-starmap + polars transitive)
# Status: Used by orbit-core-starmap and polars (analytics stack)
# Risk: Low (no known vulnerability, maintenance-only advisory)
# Plan: Migration tracked in docs/DEPENDABOT_ISSUES.md
# RUSTSEC-2026-0002: lru unsound IterMut (via aws-sdk-s3)
# Status: Transitive dependency through AWS SDK S3 client
# Risk: Medium (unsoundness could cause UB in edge cases)
# Plan: Remove once AWS SDK updates lru
ignore = [
    "RUSTSEC-2023-0071",  # RSA timing side-channel (SMB feature only)
    "RUSTSEC-2024-0436",  # paste - compile-time macro only
    "RUSTSEC-2025-0134",  # rustls-pemfile unmaintained (AWS SDK transitive dep)
    "RUSTSEC-2025-0141",  # bincode unmaintained (core-starmap + polars)
    "RUSTSEC-2026-0002",  # lru unsound IterMut (AWS SDK transitive dep)
]

# Yanked Crates
[yanked]
enabled = true
update_index = true
